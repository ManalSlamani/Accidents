{% extends 'home/welcome.html' %}
{% block page_name %} Tableau de bord {% endblock %}
{% load static %}
{% block content %}
<style>
   input[type=file]{
       width: 100%;
       padding: 5px ;
       margin: 2px 0;
       display: inline-block;
       border: 1px solid #ccc;
       box-sizing: border-box;
       position: relative;
       left: 1%;
    }
  select {
  width: 300px;
  height: 36px;
  padding: 10px 10px;
  {#margin: 8px 0;#}
  display: inline-block;
  border: 1px solid #ccc;
  box-sizing: border-box;
  }
    div.scroll {
                margin: 4px;
                padding:4px;
                overflow: auto;
                width: 100%;
                height: 100%;
                overflow-x: hidden;
                overflow-y: auto;
                text-align:justify;
            }
    div.scrollmenu {
           overflow: auto;
           white-space: nowrap;
}
    </style>



<div class="container-fluid">

    <div style="width: 100%; border-style: solid; border-width: 1px;  padding: 7px" id="importDataDiv">
        <h5 style="border-left: solid; padding-left: 5px; ">Importer de nouvelles données</h5>
        <br>
        <form action="{% url 'upload' %}" method="post" enctype="multipart/form-data" >
            <div class="input-group" >
                <div class="custom-file" >
                {% csrf_token %}
{#                    {{form}}#}
                    <input type="file" name="importData">
                </div>
                <div class="input-group-append">
                    <button class="btn btn-info" type="submit" style="width: 100%; height: 36px; margin-top: -3px"><img src="{%  static 'img/import1.png'  %}" style="height: 15px; margin-right: 6px">Importer</button>
                </div>
            </div>
        </form>
    </div> <br>
    <div style="float: right; margin-bottom: 0px">
           <form action="{% url 'change' %}" method="post"  class="form-inline">
               <div class="input-group mb-2" >
               {% csrf_token %}
               {{ wilayaform}}
               </div>
               <div class="input-group-append">
               <button type="submit" class="btn btn-warning" style="width: 150%; height: 36px; margin-top: -8px">Valider</button>
               </div>
           </form>

     </div>
    <div style="height: 500px; border-style: solid; border-width: 0.5px;" class="scroll scrollmenu">


     <p style="float: right;">Total: {{ total }}</p>
    <table class="table-bordered" style="width: 130%; font-size: 10px; height: 100%">

        <thead style="background: #ffeaa7;">
    <tr style="font-size: 11px">

      <th scope="col">Wilaya</th>
      <th scope="col">Latitude</th>
      <th scope="col">Longitude</th>
      <th scope="col">Date</th>
      <th scope="col">Heure</th>
      <th scope="col">Jour</th>
      <th scope="col">Mois</th>
      <th scope="col">Cause de l'accident</th>
      <th scope="col">Type de route</th>
      <th scope="col">Nbre de blessés</th>
      <th scope="col">Nbre de décés</th>
      <th scope="col">Age du chauffeur</th>
      <th scope="col">Date de naissance chauff</th>
      <th scope="col">Année d'obtention du permis</th>
      <th scope="col">Catégorie du véhicule</th>
      <th scope="col">Tempé- rature</th>
      <th scope="col">Préce- pitations</th>
      <th scope="col">Couverture Nuageuse</th>
      <th scope="col">Vitesse du vent</th>
      <th scope="col">Temp du vent</th>
      <th scope="col">Humidité</th>
    </tr>
  </thead>
        {% for i in data %}
            <tr>
            <td> {{ i.wilaya }}</td>
            <td> {{ i.latitude }}</td>
            <td> {{ i.longitude }}</td>
            <td> {{ i.date }}</td>
            <td> {{ i.heure }}</td>
            <td> {{ i.jour }}</td>
            <td> {{ i.mois }}</td>
            <td> {{ i.cause_acc }}</td>
            <td> {{ i.type_route }}</td>
            <td> {{ i.nbre_bless }}</td>
            <td> {{ i.nbre_dec }}</td>
            <td> {{ i.age_chauff }}</td>
            <td> {{ i.date_naiss_chauff }}</td>
            <td> {{ i.annee_permis }}</td>
            <td> {{ i.cat_veh }}</td>
            <td> {{ i.temperature }}</td>
            <td> {{ i.precipitation }}</td>
            <td> {{ i.vitessevent }}</td>
            <td> {{ i.tempvent}}</td>
            <td> {{ i.humidite}}</td></tr>
        {% endfor %}
    </table></div>



    </div>



<script src="{% static 'js/jquery-3.5.1.js' %}"></script>
<script>
    $(".custom-file-input").on("change", function() {
  var fileName = $(this).val().split("\\").pop();
  $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
});
    </script>

{% endblock %}